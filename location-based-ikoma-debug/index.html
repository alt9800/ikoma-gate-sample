<!DOCTYPE html>
<html lang="jp">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <script src="https://aframe.io/releases/1.4.0/aframe.min.js"></script>
    <script src="https://unpkg.com/aframe-look-at-component@0.8.0/dist/aframe-look-at-component.min.js"></script>
    <script src="https://raw.githack.com/AR-js-org/AR.js/master/aframe/build/aframe-ar-nft.js"></script>
    <style>
        #debug {
            position: fixed;
            z-index: 10000;
            background-color: #fff;
            padding: 10px;
            top: 0;
            left: 0;
            display: block;
        }
    </style>
</head>

<body style="margin: 0; overflow: hidden;">
    <div id="debug"></div>
    <a-scene vr-mode-ui="enabled: false" embedded arjs="sourceType: webcam; debugUIEnabled: false;">
        <a-assets>
            <!-- a-asset-item id="3d-model" src="./assets/asset.glb"></a-asset-item-->
            <!-- 一旦ローポリにしたモデルが実験基地で表示されるか試す-->
            <a-asset-item id="3d-model" src="./modi-decimate.glb"></a-asset-item>
        </a-assets>

        <a-gltf-model src="#3d-model" 
            gps-entity-place="latitude: 34.69276012963216; longitude: 135.6970057607354;"
            scale="4 4 4">
        </a-gltf-model>
        
        <a-text id="text" value="" look-at="[gps-camera]" scale="30 30 30" position="0 55 0"
            gps-entity-place="latitude: 34.69276012963216; longitude: 135.6970057607354;"></a-text>
        <a-camera gps-camera rotation-reader> </a-camera>
    </a-scene>
    <script>
        window.addEventListener('load', () => {
            const text = document.getElementById('text');
            text.addEventListener('gps-entity-place-update-positon', (event) => {
                document.getElementById('debug').textContent = `あと${event.detail.distance}m`;
                text.setAttribute('value', text.getAttribute('distanceMsg') + ' left');
            });
        });
    </script>
</body>

</html>